!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs"),require("rxjs/operators"),require("@angular/core"),require("actioncable")):"function"==typeof define&&define.amd?define(["exports","rxjs","rxjs/operators","@angular/core","actioncable"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["ng2-cable"]={},e.Rx,e.Rx.operators,e.ng.core,e.ActionCable)}(this,function(e,t,n,r,o){"use strict";function i(n){if(n&&n.__esModule)return n;var r=Object.create(null);return n&&Object.keys(n).forEach(function(e){var t;"default"!==e&&(t=Object.getOwnPropertyDescriptor(n,e),Object.defineProperty(r,e,t.get?t:{enumerable:!0,get:function(){return n[e]}}))}),r.default=n,Object.freeze(r)}var a=i(r),c=i(o),s=(u.prototype.broadcast=function(e,t){this._eventBus.next({key:e,data:t})},u.prototype.on=function(t){return this._eventBus.asObservable().pipe(n.filter(function(e){return e.key===t}),n.map(function(e){return e.data}))},u);function u(){this._eventBus=new t.Subject}var f=(d.prototype.subscribe=function(e,t,n){var r=this;void 0===n&&(n={}),this.setCable(e);n=Object.assign({channel:t},n);this.subscription=this.cable.subscriptions.create(n,{received:function(e){r.broadcaster.broadcast(e.action||t,e)}})},d.prototype.setCable=function(e){this.cable=c.createConsumer(e)},d.prototype.unsubscribe=function(){this.cable.subscriptions.remove(this.subscription)},d.ɵfac=function(e){return new(e||d)(a.ɵɵinject(s))},d.ɵprov=a.ɵɵdefineInjectable({token:d,factory:d.ɵfac}),d);function d(e){this.broadcaster=e,this.actionCable=c}"undefined"!=typeof ngDevMode&&!ngDevMode||a.ɵsetClassMetadata(f,[{type:r.Injectable}],function(){return[{type:s}]},null);l.forRoot=function(){return{ngModule:l,providers:[f,s]}},l.ɵfac=function(e){return new(e||l)},l.ɵmod=a.ɵɵdefineNgModule({type:l}),l.ɵinj=a.ɵɵdefineInjector({providers:[f,s]}),o=l;function l(){}"undefined"!=typeof ngDevMode&&!ngDevMode||a.ɵsetClassMetadata(o,[{type:r.NgModule,args:[{providers:[f,s]}]}],null,null),e.Broadcaster=s,e.Ng2Cable=f,e.Ng2CableModule=o,Object.defineProperty(e,"__esModule",{value:!0})});