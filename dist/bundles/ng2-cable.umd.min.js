!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs"),require("rxjs/operators"),require("tslib"),require("@angular/core"),require("actioncable")):"function"==typeof define&&define.amd?define(["exports","rxjs","rxjs/operators","tslib","@angular/core","actioncable"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["ng2-cable"]={},e.Rx,e.Rx.operators,e.tslib,e.ng.core,e.ActionCable)}(this,function(e,t,r,o,n,i){"use strict";function s(r){if(r&&r.__esModule)return r;var o=Object.create(null);return r&&Object.keys(r).forEach(function(e){var t;"default"!==e&&(t=Object.getOwnPropertyDescriptor(r,e),Object.defineProperty(o,e,t.get?t:{enumerable:!0,get:function(){return r[e]}}))}),o.default=r,Object.freeze(o)}var o=s(o),a=s(i),c=(u.prototype.broadcast=function(e,t){this._eventBus.next({key:e,data:t})},u.prototype.on=function(t){return this._eventBus.asObservable().pipe(r.filter(function(e){return e.key===t}),r.map(function(e){return e.data}))},u);function u(){this._eventBus=new t.Subject}var b=(l.prototype.subscribe=function(e,t,r){var o=this;void 0===r&&(r={}),this.setCable(e);r=Object.assign({channel:t},r);this.subscription=this.cable.subscriptions.create(r,{received:function(e){o.broadcaster.broadcast(e.action||t,e)}})},l.prototype.setCable=function(e){this.cable=a.createConsumer(e)},l.prototype.unsubscribe=function(){this.cable.subscriptions.remove(this.subscription)},o.__decorate([n.Injectable(),o.__metadata("design:paramtypes",[c])],l));function l(e){this.broadcaster=e,this.actionCable=a}var f,n=((f=p).forRoot=function(){return{ngModule:f,providers:[b,c]}},f=o.__decorate([n.NgModule({providers:[b,c]})],p));function p(){}e.Broadcaster=c,e.Ng2Cable=b,e.Ng2CableModule=n,Object.defineProperty(e,"__esModule",{value:!0})});